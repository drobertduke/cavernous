<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  background: #000;
}

</style>
<body>
<script src="lib/three.min.js"></script>
<script src="lib/TrackballControls.js"></script>
<script>
    var scene, camera, renderer, controls;
    var geometry, material, mesh;

    init();
    animate();

    function init() {

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
        camera.position.z = 1000;

        controls = new THREE.TrackballControls( camera );

        var hexRadius = 50;
        var hexRadiusVector = new THREE.Vector3( 0, hexRadius, 0 );
        var hexFirstRotation = new THREE.Vector3( 0, hexRadius, 0 );
        var hexRotation = new THREE.Euler( 0, 0, Math.PI / 3, 'XYZ' );
        hexFirstRotation.applyEuler(hexRotation);
        var hexagon = new THREE.Shape();
        hexagon.moveTo(hexRadiusVector.x, hexRadiusVector.y);
        for (i = 0; i < 6; i++ ) {
            hexRadiusVector.applyEuler(hexRotation);
            hexagon.lineTo(hexRadiusVector.x, hexRadiusVector.y);
        }
        //var hexGeom = new THREE.ExtrudeGeometry( hexagon, { amount: 200 } );
        var hexGeom = new THREE.ShapeGeometry( hexagon );
        material = new THREE.MeshBasicMaterial( { color: 0x888888 } );
        mesh = new THREE.Mesh( hexGeom, material );
        var gridWidth = 50;
        var gridHeight = 50;
        for (var i = 0; i < gridWidth; i++) {
            for (var j = 0; j < gridHeight; j++ ) {
                xOffset = (j % 2 == 0)? 0 : hexFirstRotation.x;
                newMesh = mesh.clone();
                newMesh.position = new THREE.Vector3( i * hexFirstRotation.x * 2 + xOffset, j * (hexRadius * 2 - (hexRadius - hexFirstRotation.y)), 0 );
                scene.add( newMesh );
            }
        }

        //scene.add( mesh );

        renderer = new THREE.CanvasRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        document.body.appendChild( renderer.domElement );

    }

    function animate() {

        // note: three.js includes requestAnimationFrame shim
        requestAnimationFrame( animate );

        controls.update();

        renderer.render( scene, camera );

    }

  
</script>
